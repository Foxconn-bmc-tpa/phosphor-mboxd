TEST_MBOX_VPNOR_SRCS = common.c pnor_partition_table.cpp

test_vpnor_create_pnor_partition_table_SOURCES = \
	$(TEST_MBOX_VPNOR_SRCS) \
	%reldir%/create_pnor_partition_table.cpp
test_vpnor_create_pnor_partition_table_LDFLAGS = $(OESDK_TESTCASE_FLAGS)
test_vpnor_create_pnor_partition_table_LDADD = -lstdc++fs \
	$(SDBUSPLUS_LIBS) \
	$(PHOSPHOR_LOGGING_LIBS) \
	$(PHOSPHOR_DBUS_INTERFACES_LIBS)

test_vpnor_create_read_window_vpnor_SOURCES = \
	$(TEST_MBOX_VPNOR_SRCS) $(TEST_MOCK_SRCS) \
	mboxd_msg.c \
	mboxd_windows.c \
	mboxd_lpc.c \
	mboxd_lpc_virtual.cpp \
	mboxd_pnor_partition_table.cpp \
	mboxd_flash_virtual.cpp \
	pnor_partition.cpp \
	%reldir%/create_read_window_vpnor.cpp
test_vpnor_create_read_window_vpnor_LDFLAGS = $(OESDK_TESTCASE_FLAGS)
test_vpnor_create_read_window_vpnor_LDADD = -lstdc++fs \
	$(SDBUSPLUS_LIBS) \
	$(PHOSPHOR_LOGGING_LIBS) \
	$(PHOSPHOR_DBUS_INTERFACES_LIBS)

test_vpnor_write_flash_vpnor_SOURCES = \
	$(TEST_MBOX_VPNOR_SRCS) \
	mboxd_pnor_partition_table.cpp \
	mboxd_flash_virtual.cpp \
	mtd.c \
	pnor_partition.cpp \
	%reldir%/write_flash_vpnor.cpp
test_vpnor_write_flash_vpnor_LDFLAGS = $(OESDK_TESTCASE_FLAGS)
test_vpnor_write_flash_vpnor_LDADD = -lstdc++fs \
	$(SDBUSPLUS_LIBS) \
	$(PHOSPHOR_LOGGING_LIBS) \
	$(PHOSPHOR_DBUS_INTERFACES_LIBS)

if VIRTUAL_PNOR_ENABLED
check_PROGRAMS += \
	%reldir%/create_pnor_partition_table \
	%reldir%/create_read_window_vpnor \
	%reldir%/write_flash_vpnor
endif
